  <ion-header [translucent]="true">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button color="primary"></ion-menu-button>
      </ion-buttons>
      <ion-title>Sinapi</ion-title>
    </ion-toolbar>

  </ion-header>

  <ion-content [fullscreen]="true" class="ion-padding" color="light">
    <ion-card *ngFor="let compositionSinapi of compositionSinapis" (click)="onDetail(compositionSinapi)">
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-label class="text-bold">Código  </ion-label>
           {{ compositionSinapi.code }}
         </ion-col>
       </ion-row> 
      <ion-row>
         <ion-col>
          <ion-label class="text-bold">Descrição  </ion-label>
          {{ compositionSinapi.description }}
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
         <ion-label class="text-bold">Unidade de medida  </ion-label>
         {{ compositionSinapi.unitOfMeasurementSinapi!.description }}
       </ion-col>
     </ion-row>
     <ion-row>
      <ion-col>
       <ion-label class="text-bold">Macro/classe/grupo  </ion-label>
       {{ compositionSinapi.macroClassGroup }}
     </ion-col>
   </ion-row>
   <ion-row>
    <ion-col>
     <ion-label class="text-bold">Caderno Técnico  </ion-label>
     {{ compositionSinapi.technicalNotebook!.description }}
   </ion-col>
 </ion-row>

    </ion-grid>
    </ion-card> 
</ion-content>

<ion-toolbar>
  <ion-tabs>
    <ion-tab-bar>
      <ion-tab-button (click)="openModal(true)">
        <ion-icon name="funnel"></ion-icon>
        Filtrar por Caderno técnico
      </ion-tab-button>
      <ion-tab-button (click)="openModalCode(true)" >
        <ion-icon name="funnel"></ion-icon>
        Filtrar por Código
      </ion-tab-button>
      <ion-tab-button (click)="openModalDescription(true)" >
        <ion-icon name="funnel"></ion-icon>
        Filtrar por Descrição
      </ion-tab-button>
    </ion-tab-bar>
  </ion-tabs>
</ion-toolbar>

  <ion-modal [isOpen]="isModalOpen">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Selecione um caderno técnico</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="openModal(false)"><ion-icon name="close"></ion-icon></ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content [fullscreen]="true" color="light">
        <ion-list [inset]="true" >
          <ion-item (click)="filterByTechnicalNotebook(item)" *ngFor='let item of technicalNotebooks'>
            <ion-label>{{item.description}}</ion-label>
          </ion-item>
        </ion-list>
      </ion-content>
          </ng-template>
  </ion-modal>

  <ion-modal [isOpen]="isOpenCode">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Digite o código abaixo </ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="openModalCode(false)"><ion-icon name="close"></ion-icon></ion-button>
          </ion-buttons>  
        </ion-toolbar>
          </ion-header>
      <ion-content [fullscreen]="true" color="light">
        <form [formGroup]="form">
        <ion-row class="ion-margin">
          <ion-col>
            <ion-input formControlName="code">
              <ion-button (click)="filterByCode()" fill="clear" slot="end" aria-label="Show/hide">
              <ion-icon slot="icon-only" name="search" aria-hidden="true"></ion-icon>
            </ion-button>
          </ion-input>
          <div class="error-container" *ngIf="submitted">
            <div>
              <p *ngIf="form.get('code').errors">
                <ion-label color="danger">* Informe o código</ion-label>
              </p>
            </div>
          </div>      
          </ion-col>
        </ion-row>
        </form>
        </ion-content>
          </ng-template>
  </ion-modal>


  <ion-modal [isOpen]="isOpenDescription">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Filtro por palavra </ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="openModalDescription(false)"><ion-icon name="close"></ion-icon></ion-button>
          </ion-buttons>  
        </ion-toolbar>
          </ion-header>
      <ion-content [fullscreen]="true" color="light">
        <form [formGroup]="formDescription">
        <ion-row class="ion-margin">
          <ion-col>
            <ion-input formControlName="search" maxlength="20">
              <ion-button (click)="filterByDescription()" fill="clear" slot="end" aria-label="Show/hide">
              <ion-icon slot="icon-only" name="search" aria-hidden="true"></ion-icon>
            </ion-button>
          </ion-input>
          <div class="error-container" *ngIf="submitted">
            <div>
              <p *ngIf="formDescription.get('search').errors">
                <ion-label color="danger">* Informe a descrição</ion-label>
              </p>
            </div>
          </div>      
          </ion-col>
        </ion-row>
        </form>
        </ion-content>
          </ng-template>
  </ion-modal>








